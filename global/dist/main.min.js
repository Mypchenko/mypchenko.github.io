"use strict";document.body.onload=function(){var page=document.getElementsByClassName("pageContainer")[0];var pageReturnArea=document.getElementsByClassName("pageReturnArea")[0];var mainMenuContainer=document.getElementsByClassName("mainMenu")[0];var mainMenuBtn=document.getElementsByClassName("mainMenuBtn")[0];var sectionsContainer=document.getElementsByClassName("sectionsContainer")[0];var sections=sectionsContainer.children;// --- main menu ---
createMainMenuEntries(sections,mainMenuContainer,mainMenuBtn,pageReturnArea);var mainMenuElements=Array.from(document.getElementsByClassName("mainMenuElement"));// --- section nav ---
var sectionNavContainer=document.getElementsByClassName("sectionNavContainer")[0];var sectionNavLinePointContainer=createElementWithClasses("div","sectionNavLinePointContainer");var sectionNavLinePoint=createElementWithClasses("div","sectionNavLinePoint");sectionNavLinePointContainer.appendChild(sectionNavLinePoint.cloneNode());for(var i=0;i<sections.length;++i){var sectionNavLinePointContainerCopy=sectionNavLinePointContainer.cloneNode({deep:true});sectionNavLinePointContainerCopy.firstChild.classList.add("sectionNavLinePoint_active");sectionNavLinePointContainerCopy.classList.add("sectionNavLinePointContainer_active");var sectionName=createElementWithClasses("div","sectionName");var numberSpan=createElementWithClasses("span","sectionName__number");numberSpan.textContent=adjustNumLength(i+1,2);var nameSpan=createElementWithClasses("span","sectionName__name");nameSpan.textContent=sections[i].dataset.name;sectionName.appendChild(numberSpan);sectionName.appendChild(nameSpan);sectionNavLinePointContainerCopy.appendChild(sectionName);sectionNavContainer.appendChild(sectionNavLinePointContainerCopy);if(i<sections.length-1){for(var _i=0;_i<3;++_i){sectionNavContainer.appendChild(sectionNavLinePointContainer.cloneNode({deep:true}))}}}// TODO --- scrolling events ---
page.addEventListener("wheel",wheelEventFunc);// --- start section ---
var pageSection={previous:sections.length-1,current:sections.length-1};var busy=false;scrollToPage(0);// --- functions ---
function scrollToPage(id){if(!busy){busy=true;var animationIsUpwards=pageSection.current-id===1||id===sections.length-1&&pageSection.current===0;deactivatePage(pageSection.current,animationIsUpwards);activatePage(id,animationIsUpwards);pageSection.previous=pageSection.current;pageSection.current=id;setTimeout(function(){busy=false},500)}busy=true}function activatePage(id,animationIsUpwards){var page=sections[id];var mainMenuEntry=mainMenuElements[id];// TODO simplify
var sectionNavLPContainer=Array.from(sectionNavContainer.children).filter(function(val){return val.classList.contains("sectionNavLinePointContainer_active")})[id];sectionNavLPContainer.firstChild.classList.add("sectionNavLinePoint_selected");sectionNavLPContainer.lastChild.classList.add("sectionName_nameShown");mainMenuEntry.classList.add("mainMenuElement_current")}function deactivatePage(id,animationIsUpwards){var page=sections[id];var mainMenuEntry=mainMenuElements[id];var sectionNavLPContainer=Array.from(sectionNavContainer.children).filter(function(val){return val.classList.contains("sectionNavLinePointContainer_active")})[id];sectionNavLPContainer.firstChild.classList.remove("sectionNavLinePoint_selected");sectionNavLPContainer.lastChild.classList.remove("sectionName_nameShown");mainMenuEntry.classList.remove("mainMenuElement_current")}function formatIdx(idx,arrLength){if(idx<0)return arrLength-1;return idx%arrLength}function createElementWithClasses(element){var local=document.createElement(element);if((arguments.length<=1?0:arguments.length-1)>0){for(var _i2=0;_i2<(arguments.length<=1?0:arguments.length-1);++_i2){local.classList.add(_i2+1<1||arguments.length<=_i2+1?undefined:arguments[_i2+1])}}return local}function adjustNumLength(num,length){var str=String(num);if(str.length<length){while(str.length<length){str="0"+str}}else{str=str.slice(str.length-length)}return str}function mainMenuViewToggle(e){var isOpeningAnimation=page.classList.toggle("pageContainer_zoomedOut");pageReturnArea.classList.toggle("inactive");var transitionDelayCf=isOpeningAnimation?0.05:0.02;for(var _i3=0;_i3<mainMenuElements.length;++_i3){mainMenuElements[_i3].style.transitionDelay="".concat((isOpeningAnimation?_i3:mainMenuElements.length-_i3-1)*transitionDelayCf,"s")}mainMenuElements.map(function(element){element.classList.toggle("mainMenuElement_appear")});e.stopPropagation}function wheelEventFunc(event){if(event.target.classList.contains("pageReturnArea"))return;if(event.deltaY<0){var pageId=formatIdx(pageSection.current-1,sections.length);scrollToPage(pageId)}else if(event.deltaY>0){var _pageId=formatIdx(pageSection.current+1,sections.length);scrollToPage(_pageId)}event.preventDefault}function createMainMenuEntries(sourceEntries,container){var list=document.createElement("ul");var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=sourceEntries[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var entry=_step.value;var menuElement=createElementWithClasses("li","mainMenuElement");menuElement.textContent=entry.dataset.name;list.appendChild(menuElement)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}container.appendChild(list);for(var _len=arguments.length,menuButtons=new Array(_len>2?_len-2:0),_key=2;_key<_len;_key++){menuButtons[_key-2]=arguments[_key]}for(var _i4=0;_i4<menuButtons.length;_i4++){var button=menuButtons[_i4];button.addEventListener("click",mainMenuViewToggle)}}};

//# sourceMappingURL=main.min.js.map